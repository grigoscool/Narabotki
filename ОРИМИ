--- 1.ВСЕ ЗАКАЗЫ КЛИЕНТА ПО МАРШ ЛИСТУ 2.ВСЕ ДОКУМЕНТЫ ОТГРУЗКИ
ВЫБРАТЬ РАЗЛИЧНЫЕ
	уатМаршрутныйЛистЗаказы.Ссылка КАК Ссылка,
	уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	ВЫБОР
		КОГДА уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование ССЫЛКА Документ.ЗаказКлиента
			ТОГДА уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование
		КОГДА уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование ССЫЛКА Документ.ИТПлСборочныйЛист
			ТОГДА ИТПлСборочныйЛистТовары.ЗаказКлиента
	КОНЕЦ КАК ДокументОснование
ПОМЕСТИТЬ втЗаказыКлиента
ИЗ
	Документ.уатМаршрутныйЛист.Заказы КАК уатМаршрутныйЛистЗаказы
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.уатЗаказГрузоотправителя.ИТПлДокументыОснования КАК уатЗаказГрузоотправителяИТПлДокументыОснования
			ЛЕВОЕ СОЕДИНЕНИЕ Документ.ИТПлСборочныйЛист.Товары КАК ИТПлСборочныйЛистТовары
			ПО ((ВЫРАЗИТЬ(уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование КАК Документ.ИТПлСборочныйЛист)) = ИТПлСборочныйЛистТовары.Ссылка)
				И (НЕ ИТПлСборочныйЛистТовары.Ссылка.ПометкаУдаления)
		ПО (уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя = уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка)
			И (НЕ уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка.ПометкаУдаления)
ГДЕ
	уатМаршрутныйЛистЗаказы.Ссылка = &Ссылка
	И уатМаршрутныйЛистЗаказы.ТипТочкиМаршрута = ЗНАЧЕНИЕ(перечисление.уатТипыТочекМаршрута.Разгрузка)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ Различные
	втЗаказыКлиента.Ссылка КАК Ссылка,
	втЗаказыКлиента.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	втЗаказыКлиента.ДокументОснование КАК ДокументОснование,
	РеализацияТоваровУслуг.Ссылка КАК ДокументОтгрузки
ИЗ
	втЗаказыКлиента КАК втЗаказыКлиента
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
		ПО (втЗаказыКлиента.ДокументОснование = РеализацияТоваровУслуг.ЗаказКлиента
				И НЕ РеализацияТоваровУслуг.ПометкаУдаления)
Где
	НЕ РеализацияТоваровУслуг.Ссылка есть null

Объединить все

ВЫБРАТЬ Различные
	втЗаказыКлиента.Ссылка КАК Ссылка,
	втЗаказыКлиента.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	втЗаказыКлиента.ДокументОснование КАК ДокументОснование,
	ПередачаТоваровХранителю.Ссылка КАК ДокументОтгрузки
ИЗ
	втЗаказыКлиента КАК втЗаказыКлиента
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ПередачаТоваровХранителю КАК ПередачаТоваровХранителю
		ПО (втЗаказыКлиента.ДокументОснование = ПередачаТоваровХранителю.ЗаказКлиента
				И НЕ ПередачаТоваровХранителю.ПометкаУдаления)
Где
	НЕ ПередачаТоваровХранителю.Ссылка есть null	
//////////////////////////////////////////////////////////////////////

