--- 1.ВСЕ ЗАКАЗЫ КЛИЕНТА ПО МАРШ ЛИСТУ 2.ВСЕ ДОКУМЕНТЫ ОТГРУЗКИ
ВЫБРАТЬ РАЗЛИЧНЫЕ
	уатМаршрутныйЛистЗаказы.Ссылка КАК МаршрутныйЛист,
	уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	ВЫБОР
		КОГДА уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование ССЫЛКА Документ.ЗаказКлиента
			ТОГДА ВЫРАЗИТЬ(уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование КАК Документ.ЗаказКлиента)
		КОГДА уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование ССЫЛКА Документ.ИТПлСборочныйЛист
			ТОГДА ИТПлСборочныйЛистТовары.ЗаказКлиента
	КОНЕЦ КАК ЗаказКлиента
ПОМЕСТИТЬ втЗаказыКлиента
ИЗ
	Документ.уатМаршрутныйЛист.Заказы КАК уатМаршрутныйЛистЗаказы
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.уатЗаказГрузоотправителя.ИТПлДокументыОснования КАК уатЗаказГрузоотправителяИТПлДокументыОснования
			ЛЕВОЕ СОЕДИНЕНИЕ Документ.ИТПлСборочныйЛист.Товары КАК ИТПлСборочныйЛистТовары
			ПО ((ВЫРАЗИТЬ(уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование КАК Документ.ИТПлСборочныйЛист)) = ИТПлСборочныйЛистТовары.Ссылка)
				И (НЕ ИТПлСборочныйЛистТовары.Ссылка.ПометкаУдаления)
		ПО (уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя = уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка)
			И (НЕ уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка.ПометкаУдаления)
ГДЕ
	уатМаршрутныйЛистЗаказы.Ссылка = &Ссылка
	И уатМаршрутныйЛистЗаказы.ТипТочкиМаршрута = ЗНАЧЕНИЕ(перечисление.уатТипыТочекМаршрута.Разгрузка)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ Различные
	втЗаказыКлиента.МаршрутныйЛист КАК МаршрутныйЛист,
	втЗаказыКлиента.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	втЗаказыКлиента.ЗаказКлиента КАК ЗаказКлиента,
	РеализацияТоваровУслуг.Ссылка КАК ДокументОтгрузки
ИЗ
	втЗаказыКлиента КАК втЗаказыКлиента
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
		ПО (втЗаказыКлиента.ДокументОснование = РеализацияТоваровУслуг.ЗаказКлиента
				И НЕ РеализацияТоваровУслуг.ПометкаУдаления)

Объединить все

ВЫБРАТЬ Различные
	втЗаказыКлиента.МаршрутныйЛист КАК МаршрутныйЛист,
	втЗаказыКлиента.ЗаказГрузоотправителя КАК ЗаказГрузоотправителя,
	втЗаказыКлиента.ЗаказКлиента КАК ЗаказКлиента,
	ПередачаТоваровХранителю.Ссылка КАК ДокументОтгрузки
ИЗ
	втЗаказыКлиента КАК втЗаказыКлиента
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ПередачаТоваровХранителю КАК ПередачаТоваровХранителю
		ПО (втЗаказыКлиента.ДокументОснование = ПередачаТоваровХранителю.ЗаказКлиента
				И НЕ ПередачаТоваровХранителю.ПометкаУдаления)
//////////////////////////////////////////////////////////////////////

--- 3. МАРШРУТНЫЕ ЛИСТЫ ПО ЗАКАЗУ КЛИЕНТА
ВЫБРАТЬ
	ИТПлСборочныйЛистТовары.ЗаказКлиента КАК ЗаказКлиента,
	уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка КАК ЗаказНаТС,
	ПРЕДСТАВЛЕНИЕ(уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка) КАК ПредставлениеЗаказНаТС,
	уатМаршрутныйЛистЗаказы.Ссылка КАК МаршрутныйЛист,
	ПРЕДСТАВЛЕНИЕ(уатМаршрутныйЛистЗаказы.Ссылка) КАК ПредставлениеМаршрутныйЛист
ИЗ
	Документ.ИТПлСборочныйЛист.Товары КАК ИТПлСборочныйЛистТовары
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.уатЗаказГрузоотправителя.ИТПлДокументыОснования КАК уатЗаказГрузоотправителяИТПлДокументыОснования
			ЛЕВОЕ СОЕДИНЕНИЕ Документ.уатМаршрутныйЛист.Заказы КАК уатМаршрутныйЛистЗаказы
			ПО уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка = уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя
				И (уатМаршрутныйЛистЗаказы.ТипТочкиМаршрута = ЗНАЧЕНИЕ(Перечисление.уатТипыТочекМаршрута.Разгрузка))
				И (НЕ уатМаршрутныйЛистЗаказы.Ссылка.ПометкаУдаления)
		ПО (ИТПлСборочныйЛистТовары.Ссылка = (ВЫРАЗИТЬ(уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование КАК Документ.ИТПлСборочныйЛист)))
			И (НЕ уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка.ПометкаУдаления)
ГДЕ
	ИТПлСборочныйЛистТовары.ЗаказКлиента = &ЗаказКлиента
	И НЕ ИТПлСборочныйЛистТовары.Ссылка.ПометкаУдаления

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование,
	уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка,
	ПРЕДСТАВЛЕНИЕ(уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка),
	уатМаршрутныйЛистЗаказы.Ссылка,
	ПРЕДСТАВЛЕНИЕ(уатМаршрутныйЛистЗаказы.Ссылка)
ИЗ
	Документ.уатЗаказГрузоотправителя.ИТПлДокументыОснования КАК уатЗаказГрузоотправителяИТПлДокументыОснования
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.уатМаршрутныйЛист.Заказы КАК уатМаршрутныйЛистЗаказы
		ПО уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка = уатМаршрутныйЛистЗаказы.ЗаказГрузоотправителя
			И (уатМаршрутныйЛистЗаказы.ТипТочкиМаршрута = ЗНАЧЕНИЕ(Перечисление.уатТипыТочекМаршрута.Разгрузка))
			И (НЕ уатМаршрутныйЛистЗаказы.Ссылка.ПометкаУдаления)
ГДЕ
	(ВЫРАЗИТЬ(уатЗаказГрузоотправителяИТПлДокументыОснования.ДокументОснование КАК Документ.ЗаказКлиента)) = &ЗаказКлиента
	И НЕ уатЗаказГрузоотправителяИТПлДокументыОснования.Ссылка.ПометкаУдаления

--- ЗАПРОС ПОКАЗЫВАЮЩИЙ ОБЪЕКТЫ С КОЛИЧЕСТВОМ СТРОК В ТЧ БОЛЕЕ 1
ВЫБРАТЬ
	уатМаршрутныйЛистИТПлТарифыПоОрганизациям.Ссылка КАК Ссылка
ИЗ
	Документ.уатМаршрутныйЛист.ИТПлТарифыПоОрганизациям КАК уатМаршрутныйЛистИТПлТарифыПоОрганизациям

СГРУППИРОВАТЬ ПО
	уатМаршрутныйЛистИТПлТарифыПоОрганизациям.Ссылка

ИМЕЮЩИЕ
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ уатМаршрутныйЛистИТПлТарифыПоОрганизациям.Организация) > 1
