
Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)  
	
	СтандартнаяОбработка = Ложь;
	 
	 //Получаем схему из макета
	СхемаКомпоновкиДанных = ПолучитьМакет("ОсновнаяСхемаКомпоновкиДанных");

	//Из схемы возьмем настройки по умолчанию
	Настройки = КомпоновщикНастроек.ПолучитьНастройки();
  // устанавливаем параметры программно
	ПараметрДата = Настройки.ПараметрыДанных.Элементы.Найти("Дата");
	Если НЕ ПараметрДата = Неопределено Тогда
	     Дата = ПараметрДата.Значение.Дата;
	КонецЕсли;
	
	ПараметрДанных = Настройки.ПараметрыДанных.Элементы.Найти("ДатаБПЛДоИзм"); 
	ВидЦеныБПЛ = Настройки.ПараметрыДанных.Элементы.Найти("ВидЦеныБПЛ").Значение;
	ДатаБПЛДоИзм = ПолучитьДатуДействияВидовЦен(ВидЦеныБПЛ,Дата); 
	Если НЕ Типзнч(ДатаБПЛДоИзм) = Тип("Неопределено") Тогда
	     ДатаБПЛДоИзм  = ДатаБПЛДоИзм - 1; 
	 Иначе 
		 ДатаБПЛДоИзм = Дата;
	КонецЕсли;

	ПараметрДанных.Значение = ДатаБПЛДоИзм;
	ПараметрДанных.Использование = Истина;
	
	ПараметрДанных = Настройки.ПараметрыДанных.Элементы.Найти("ДатаКПЛДоИзм"); 
	ВидЦеныКПЛ = Настройки.ПараметрыДанных.Элементы.Найти("ВидЦеныКПЛ").Значение;
	ДатаКПЛДоИзм = ПолучитьДатуДействияВидовЦен(ВидЦеныКПЛ,Дата);   
	Если НЕ Типзнч(ДатаКПЛДоИзм) = Тип("Неопределено") Тогда
	     ДатаКПЛДоИзм  = ДатаКПЛДоИзм - 1;
	 Иначе
		 ДатаКПЛДоИзм = Дата;
	КонецЕсли;

	ПараметрДанных.Значение = ДатаКПЛДоИзм;        
	ПараметрДанных.Использование = Истина;
	
	//Помещаем в переменную данные о расшифровке данных
	ДанныеРасшифровки = Новый ДанныеРасшифровкиКомпоновкиДанных;

	//Формируем макет, с помощью компоновщика макета
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;

	//Передаем в макет компоновки схему, настройки и данные расшифровки
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, Настройки, ДанныеРасшифровки);

	//Выполним компоновку с помощью процессора компоновки
	ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки, , ДанныеРасшифровки);

	//Выводим результат в табличный документ
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода.УстановитьДокумент(ДокументРезультат);

	ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных);
	
КонецПроцедуры
