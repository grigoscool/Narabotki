//Получение ТЗ по ВидуЦен
	ПараметрыМакета = Справочники.ВидыЦен.ИнициализироватьСтруктуруПарметровДляПолученияОписанияСхемКомпоновкиПоИмени();
	ПараметрыМакета.Ссылка 				= ВидЦены;
	ПараметрыМакета.ИмяМакета 			= ВидЦены.СхемаКомпоновкиДанных;
	ПараметрыМакета.ПолучитьНастройки 	= Ложь;
	ПараметрыМакета.ХранилищеСхемыКомпоновкиДанных 	= ВидЦены.ХранилищеСхемыКомпоновкиДанных;
	ПараметрыМакета.ХранилищеНастроекКомпоновкиДанных 	= ВидЦены.ХранилищеНастроекКомпоновкиДанных;
	ПараметрыМакета.ХранилищеНастроекКомпоновкиДанныхОтбораПоНоменклатуре 	= ВидЦены.ХранилищеНастроекКомпоновкиДанныхОтбораПоНоменклатуре;
			
	СхемаИНастройки = Справочники.ВидыЦен.ПолучитьОписаниеИСхемуКомпоновкиДанныхПоИмениМакета(ПараметрыМакета);
		
	СхемаКомпоновкиДанных = СхемаИНастройки.СхемаКомпоновкиДанных; // в схеме компоновки данных необходимо чтобы была заполнена структура
	
	Если Не ЗначениеЗаполнено(СхемаИНастройки.НастройкиКомпоновкиДанных) Тогда
		
		НастройкиПоУмолчанию = Новый НастройкиКомпоновкиДанных;
		КомпоновкаДанныхКлиентСервер.СкопироватьНастройкиКомпоновкиДанных(НастройкиПоУмолчанию, СхемаКомпоновкиДанных.НастройкиПоУмолчанию); 
		
		СхемаИНастройки.НастройкиКомпоновкиДанных = НастройкиПоУмолчанию;
		Если ЗначениеЗаполнено(СхемаИНастройки.НастройкиКомпоновкиДанныхОтбораПоНоменклатуре) Тогда
			КомпоновкаДанныхКлиентСервер.СкопироватьОтборКомпоновкиДанных(СхемаКомпоновкиДанных,СхемаИНастройки.НастройкиКомпоновкиДанных, СхемаИНастройки.НастройкиКомпоновкиДанныхОтбораПоНоменклатуре); 
		КонецЕсли;
					
	КонецЕсли;
	
	КомпоновщикНастроек = Новый КомпоновщикНастроекКомпоновкиДанных;
	КомпоновщикНастроек.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(СхемаКомпоновкиДанных));
	КомпоновщикНастроек.ЗагрузитьНастройки(СхемаИНастройки.НастройкиКомпоновкиДанных);    // загрузил настройки из реквизита
	
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	СегментыСервер.ВключитьОтборПоСегментуНоменклатурыВСКД(КомпоновщикНастроек);
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, КомпоновщикНастроек.ПолучитьНастройки(), , , Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений"), Ложь);
	
	
	ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновки.Инициализировать(МакетКомпоновки,,,Истина);
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений;

	ДанныеПоВидуЦен = Новый ТаблицаЗначений();
	ПроцессорВывода.УстановитьОбъект(ДанныеПоВидуЦен);
	ДанныеПоВидуЦен = ПроцессорВывода.Вывести(ПроцессорКомпоновки);   //если ТЗ пустая проверить наличие колонок, если их нет, то чего-то нехватает в НастройкиКомпоновкиДанных
	//////////////////////////
